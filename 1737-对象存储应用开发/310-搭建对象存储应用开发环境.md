---
show: step
version: 1.0 
---

## 课程介绍

本节课将会带你了解SequoiaDB所涉及到的对象存储开发。对象存储分为S3对象和Lob对象。

## 打开项目

#### 打开 IDEA

打开 IDEA 代码开发工具。

![](https://doc.shiyanlou.com/courses/1736/1207281/06650396616c742995bb63fcf933fac5-0)

#### 打开项目

打开object-java项目

![image-20200414091915064](https://doc.shiyanlou.com/courses/1737/1207281/79e3fad2d27f14cfcbc94eadd646d88d-0)

#### 查看Maven依赖

```
    <dependencies>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot</artifactId>
            <version>2.0.4.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>com.sequoiadb</groupId>
            <artifactId>sequoiadb-driver</artifactId>
            <version>3.2</version>
        </dependency>

        <dependency>
            <groupId>com.amazonaws</groupId>
            <artifactId>aws-java-sdk-s3</artifactId>
            <version>1.11.343</version>
        </dependency>

        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.62</version>
        </dependency>

        <dependency>
            <groupId>org.dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>2.1.1</version>
        </dependency>

    </dependencies>
```



## 使用Java连接S3

本小节展示一个连接S3的demo，需要注意的是获取S3连接部分，后半部分的S3相关操作在以后的章节中会提及。

本节课所操作的类均在lseeon1_s3connect包下

![image-20200413235008652](E:\巨杉\s3\新建文件夹\1\1737-1-01.png)

#### 连接S3

获取S3连接需要知道S3所在机器的ip，S3服务的监听端口号，以及该S3集群的accesskey、secretkey。

1）双击打开S3Sample类，找到main()函数内行**TODO 获取S3连接**

![image-20200414160833652](https://doc.shiyanlou.com/courses/1737/1207281/dc40563b95f4b9e9457e14fa87ee2be1-0)

2）将下方代码粘贴到第19行

```
    //初始化客户端, 生成一个与SequoiaS3的连接, 此处需要修改endPoint的地址和端口, 使之指向SequoiaS3的地址和端口.
    AWSCredentials credentials = 
    		new BasicAWSCredentials("ABCDEFGHIJKLMNOPQRST",
    			"abcdefghijklmnopqrstuvwxyz0123456789ABCD");
    String endPoint = "http://127.0.0.1:8002";
    AwsClientBuilder.EndpointConfiguration endpointConfiguration = 
    	new AwsClientBuilder.EndpointConfiguration(endPoint, null);
    //创建S3连接对象
    AmazonS3 s3 = AmazonS3ClientBuilder.standard()
        .withEndpointConfiguration(endpointConfiguration)
        .withCredentials(
        new AWSStaticCredentialsProvider(credentials)
        ).build();
```

#### 执行代码

1）鼠标移动到屏幕左边**S3Sample**类，右键点击，出现如图所示的选项条，左键单击**Run 'S3Sample'**选项

![image-20200414001358771](https://doc.shiyanlou.com/courses/1737/1207281/1f908f0b92b5e9addcf72fe15a990f50-0)

2）在屏幕下方查看结果输出，通过获取的S3对象，执行了创建存储桶、查询S3实例内存储桶和删除存储桶操作，下方展示的是查询存储桶的结果输出。

![image-20200414001508639](https://doc.shiyanlou.com/courses/1737/1207281/92530ae339a64e6d93dc3dbd65ca8f8b-0)

## 总结

本节课介绍了本次课程使用的开发工具，使用IDEA编写了一个获取S3连接的示例，为了验证连接有效，使用该连接进行了存储桶的操作。
