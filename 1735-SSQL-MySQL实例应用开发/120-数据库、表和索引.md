---
show: step
version: 1.0 

---

## 课程介绍

本课程将带领您在已经部署 SequoiaDB 巨杉数据库引擎及创建了 MySQL 实例的环境中，创建并删除数据库、表和索引

#### 请点击右侧选择使用的实验环境

#### 实验环境

课程使用的实验环境为 Ubuntu Linux 16.04 64 位版本。SequoiaDB 数据库引擎以及 SequoiaSQL-MySQL 实例均为 3.4 版本。

#### 课程概述

**数据库**

数据库，简而言之可视为电子化的文件柜——存储电子文件的处所，用户可以对文件中的数据运行新增、截取、更新、删除等操作。

所谓“数据库”系以一定方式储存在一起、能予多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合

**表**

数据表是数据库中主要的数据存储容器，表中的数据被组织成行和列。

**索引**

MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。

## 打开项目

#### 打开idea

打开idea代码开发工具

![1735-110-1.png](https://doc.shiyanlou.com/courses/1735/1207281/6f87a8c93937c3c51f6d4839559de710-0)

#### 打开SSQL-MySQL项目

打开SSQL-MySQL项目，在该课程中完成后续试验

![1735-110-13.png](https://doc.shiyanlou.com/courses/1735/1207281/40a9e7b6fbd5c3853dc09f69d0a06c86-0)

#### 打开lesson2_tableAndIndex包

打开lesson2_tableAndIndex packge，在该packge中完成后续课程。

![1735-120-1.png](https://doc.shiyanlou.com/courses/1735/1207281/ee51eb425b9b87d399ebdf5478f7a52b-0)

## 创建和删除数据库

在MySQL创建和删除数据库前，先初始化数据库环境

右键TableAndIndexMainTest.java，选择Edit修改参数为init，初始化数据库环境

![1735-120-2.png](https://doc.shiyanlou.com/courses/1735/1207281/9d8485d30e1315ccb5ac21cef61d84f5-0)

右键TableAndIndexMainTest.java，选择Run，运行初始化数据库环境代码

![1735-120-3.png](https://doc.shiyanlou.com/courses/1735/1207281/c1436d4742d10812bef90cb25d977bd7-0)

#### 创建数据库

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "create database employee";
stmt.executeUpdate(sql);
```

![1735-120-4.png](https://doc.shiyanlou.com/courses/1735/1207281/e039274b187b10bf09dc245670e9804b-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为database，确认后，右键TableAndIndexMainTest.java，选择Run执行创建数据库代码

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-6.png](https://doc.shiyanlou.com/courses/1735/1207281/d06c2cc18b33a441356e54dc5bf6bc26-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

#### 删除数据库

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "drop database employee";
stmt.executeUpdate(sql);
```

![1735-120-8.png](https://doc.shiyanlou.com/courses/1735/1207281/3629d84d2227aa47b89045d2348f9e71-0)

右键TableAndIndexMainTest.java，选择Run执行删除数据库代码

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

## 创建普通表、hash表

#### 创建sdb普通表employee

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "CREATE TABLE employee " +
    "(" +
    "empno INT AUTO_INCREMENT PRIMARY KEY, " +
    "ename VARCHAR(128), " +
    "age INT" +
    ")";
stmt.executeUpdate(sql);
```

![1735-120-9.png](https://doc.shiyanlou.com/courses/1735/1207281/39e6f744df36824099dd8a8f494af01c-0)

右键TableAndIndexMainTest.java，选择Run执行创建普通表employee

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

#### 创建hash表

也称为散列表 由直接寻址表改进而来.先看直接寻址表 当关键字的全域U比较小时，直接寻址是一种简单而有效的技术。加入某应用要用到一个动态集合，其中每个元素都有一个取自全域U={0,1,...,m-1}的关键字。同时假设没有两个元素具有相同的关键字。

右键TableAndIndexMainTest.java，选择Edit修改参数为init，初始化数据库环境

![1735-120-2.png](https://doc.shiyanlou.com/courses/1735/1207281/9d8485d30e1315ccb5ac21cef61d84f5-0)

右键TableAndIndexMainTest.java，选择Run，运行初始化数据库环境代码

![1735-120-3.png](https://doc.shiyanlou.com/courses/1735/1207281/c1436d4742d10812bef90cb25d977bd7-0)

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "CREATE TABLE employee " +
    "(" +
    "empno INT AUTO_INCREMENT PRIMARY KEY, " +
    "ename VARCHAR(128), " +
    "age INT" +
    ")COMMENT=\"sequoiadb:{table_options:{ShardingKey:{ empno: 1 }, ShardingType: " +
    "'hash', Partition: 4096, ReplSize: 1 } }\"";
stmt.executeUpdate(sql);
```

> `ShardingKey` ( *Object* )：分区键。
>
> `ShardingType` ( *String* )：分区方式。
>
> `Partition` ( *Int32* )：分区数。仅当选择 hash 分区时填写，代表了 hash 分区的个数。其值必须是2的幂。范围在[2^3，2^20]。默认为4096。
>
> `ReplSize` ( *Int32* )：写操作需同步的副本数。默认值为1。其可选取值如下：
>
> - -1：表示写请求需同步到该复制组若干活跃的节点之后，数据库写操作才返回应答给客户端。
> - 0：表示写请求需同步到该复制组的所有节点之后，数据库写操作才返回应答给客户端。
> - 1 - 7：表示写请求需同步到该复制组指定数量个节点之后，数据库写操作才返回应答给客户端。

![1735-120-10.png](https://doc.shiyanlou.com/courses/1735/1207281/9e0f0f571c7091c34188dd62bc24e4a4-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为database，确认后，右键TableAndIndexMainTest.java，选择Run执行创建hash表代码

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-6.png](https://doc.shiyanlou.com/courses/1735/1207281/d06c2cc18b33a441356e54dc5bf6bc26-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

## 创建/删除普通索引、唯一索引、复合索引

右键TableAndIndexMainTest.java，选择Edit修改参数为init，初始化数据库环境

![1735-120-2.png](https://doc.shiyanlou.com/courses/1735/1207281/9d8485d30e1315ccb5ac21cef61d84f5-0)

右键TableAndIndexMainTest.java，选择Run，运行初始化数据库环境代码

![1735-120-3.png](https://doc.shiyanlou.com/courses/1735/1207281/c1436d4742d10812bef90cb25d977bd7-0)

#### 创建普通索引

普通索引：最基本的索引，它没有任何限制，用于加速查询。

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee add index(ename)";
stmt.executeUpdate(sql);
```

![1586796904464](https://doc.shiyanlou.com/courses/1735/1207281/9a25d1f56191726157ea622dcc87dbd4-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为createTable，确认后，右键TableAndIndexMainTest.java，选择Run执行创建数据库employee代码

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-12.png](https://doc.shiyanlou.com/courses/1735/1207281/9a25d1f56191726157ea622dcc87dbd4-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

再次右键TableAndIndexMainTest.java，选择Edit修改参数为index，确认后，右键TableAndIndexMainTest.java，选择Run执行创建普通索引

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-13.png](https://doc.shiyanlou.com/courses/1735/1207281/79d37984dccc905306d51250b67e9309-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-14.png](https://doc.shiyanlou.com/courses/1735/1207281/4ade9392deab5a85972fd0d93cde71c1-0)

#### 创建唯一索引

唯一索引：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee add unique index(empno)";
stmt.executeUpdate(sql);
```

![1735-120-15.png](https://doc.shiyanlou.com/courses/1735/1207281/c62bfd3ef3c699f6a6843ca3dc77c5db-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为index，确认后，右键TableAndIndexMainTest.java，选择Run执行创建唯一索引

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-13.png](https://doc.shiyanlou.com/courses/1735/1207281/79d37984dccc905306d51250b67e9309-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-16.png](https://doc.shiyanlou.com/courses/1735/1207281/da380b0e426c63db98dda62edae024a6-0)

#### 创建复合索引

复合索引：指多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用组合索引时遵循最左前缀集合。

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee add unique index(ename,age)";
stmt.executeUpdate(sql);
```

![1735-120-17.png](https://doc.shiyanlou.com/courses/1735/1207281/1c625c26617b4aa7779c8a5a695c35f9-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为index，确认后，右键TableAndIndexMainTest.java，选择Run执行创建复合索引

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-13.png](https://doc.shiyanlou.com/courses/1735/1207281/79d37984dccc905306d51250b67e9309-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-18.png](https://doc.shiyanlou.com/courses/1735/1207281/ff67897a9c4b91ac5d89d5ce84327b6a-0)

## 删除索引

删除表employee的复合索引ename_2

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee drop index ename_2";
stmt.executeUpdate(sql);
```

![1735-120-19.png](https://doc.shiyanlou.com/courses/1735/1207281/22776c76280591de26ce3495561028b7-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为index，确认后，右键TableAndIndexMainTest.java，选择Run执行删除复合索引

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-13.png](https://doc.shiyanlou.com/courses/1735/1207281/79d37984dccc905306d51250b67e9309-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-20.png](https://doc.shiyanlou.com/courses/1735/1207281/7dcbb6eb5bdac6f48b45e3f2e05b172c-0)

## 创建、删除单列主键

“主键（PRIMARY KEY）”的完整称呼是“主键约束”。MySQL主键约束是一个列或者列的组合，其值能唯一地标识表中的每一行。这样的一列或多列称为表的主键，通过它可以强制表的实体完整性。

右键TableAndIndexMainTest.java，选择Edit修改参数为init，初始化数据库环境

![1735-120-2.png](https://doc.shiyanlou.com/courses/1735/1207281/9d8485d30e1315ccb5ac21cef61d84f5-0)

右键TableAndIndexMainTest.java，选择Run，运行初始化数据库环境代码

![1735-120-3.png](https://doc.shiyanlou.com/courses/1735/1207281/c1436d4742d10812bef90cb25d977bd7-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为createTable，确认后，右键TableAndIndexMainTest.java，选择Run执行创建数据库employee代码

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1735-120-12.png](https://doc.shiyanlou.com/courses/1735/1207281/9a25d1f56191726157ea622dcc87dbd4-0)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

#### 创建单列主键

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee add primary key(empno)";
stmt.executeUpdate(sql);
```

![1735-120-21.png](https://doc.shiyanlou.com/courses/1735/1207281/c9ca29a2f7c834ecccd34f0fe22efed8-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为primaryKey，确认后，右键TableAndIndexMainTest.java，选择Run执行创建单列主键

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1586797867331](C:\Users\ChengYueyi\AppData\Roaming\Typora\typora-user-images\1586797867331.png)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-22.png](https://doc.shiyanlou.com/courses/1735/1207281/25068d95d7ac6f57339c40ede8d59224-0)

#### 删除单列主键

修改UpdateTest.java的第8行

```java
stmt = conn.createStatement();
String sql = "alter table employee drop primary key";
stmt.executeUpdate(sql);
```

![1735-120-23.png](https://doc.shiyanlou.com/courses/1735/1207281/b4c110fc8290a95e7f51abc930daf296-0)

右键TableAndIndexMainTest.java，选择Edit修改参数为primaryKey，确认后，右键TableAndIndexMainTest.java，选择Run执行删除单列主键

![1735-120-5.png](https://doc.shiyanlou.com/courses/1735/1207281/e9e14bd292d4abf41c68cb7ee458a1d4-0)

![1586797867331](C:\Users\ChengYueyi\AppData\Roaming\Typora\typora-user-images\1586797867331.png)

![1735-120-7.png](https://doc.shiyanlou.com/courses/1735/1207281/892d8eb39f67e8451f970aad9ce057cb-0)

查看结果

![1735-120-24.png](https://doc.shiyanlou.com/courses/1735/1207281/661073e1cee9b8d88a920382ec232546-0)
