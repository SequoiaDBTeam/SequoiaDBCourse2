---
show: step
version: 1.0 
---
## 课程介绍

本课程将带领您在已经部署 SequoiaDB 巨杉数据库引擎及创建了 MySQL 实例的环境中，学习SQL语句的SELECT语句。它的用途是从一个或多个表中检索信息。

#### 请点击右侧选择使用的实验环境

#### 实验环境

课程使用的实验环境为 Ubuntu Linux 16.04 64 位版本。SequoiaDB 数据库引擎以及 SequoiaSQL-MySQL 实例均为 3.4 版本。

#### 概述

SQL语句是由简单的英语单词构成的。这些单词成为称为关键字，每个SQL语句都是由一个或多个关键字构成的。大概，最经常使用的SQL语句就是SELECT语句了。它的用途是从一个或多个表中检索信息。

本章将介绍到普通查询、where子句查询、limit、like、order by、union、group by、join

## 打开项目

#### 打开idea

打开idea代码开发工具

![1735-110-1.png](https://doc.shiyanlou.com/courses/1735/1207281/6f87a8c93937c3c51f6d4839559de710-0)

#### 打开SSQL-MySQL项目

打开SSQL-MySQL项目，在该课程中完成后续试验

![1735-110-13.png](https://doc.shiyanlou.com/courses/1735/1207281/40a9e7b6fbd5c3853dc09f69d0a06c86-0)

#### 打开lesson4_query包

打开lesson4_query packge，在该packge中完成后续课程。

![1735-140-1.png](https://doc.shiyanlou.com/courses/1735/1207281/2f2774d4225e7b3a50f3ab3e4d74e66f-0)

## 普通查询、使用where子句、limit、like、order by

#### 普通查询

使用SELECT检索表数据
 
先初始化数据库环境

右键TableAndIndexMainTest.java，选择Edit修改参数为init，初始化数据库环境

![1735-140-2.png](https://doc.shiyanlou.com/courses/1735/1207281/990c7a5be4d21f4005cca31a9eea5a77-0)

![1735-140-3.png](https://doc.shiyanlou.com/courses/1735/1207281/50a1da062d6102caeb0a9150b6b0f05d-0)

右键TableAndIndexMainTest.java，选择Run，运行初始化数据库环境代码

![1735-140-4.png](https://doc.shiyanlou.com/courses/1735/1207281/1edc5d3de1f207e14d88a74e8a606ce4-0)

打开SelectTest.java，修改第8行TODO中内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键SelectTestMain，选择Edit修改参数为select，再次右键SelectTestMain，选择Run运行代码

![1735-140-2.png](https://doc.shiyanlou.com/courses/1735/1207281/990c7a5be4d21f4005cca31a9eea5a77-0)

![1735-140-5.png](https://doc.shiyanlou.com/courses/1735/1207281/1b90da4d0e46d8b6b65657b9afe023fd-0)

![1735-140-4.png](https://doc.shiyanlou.com/courses/1735/1207281/1edc5d3de1f207e14d88a74e8a606ce4-0)

查看结果

![1735-140-6.png](https://doc.shiyanlou.com/courses/1735/1207281/dfc064c190a4d5b4da260dd382c63694-0)

#### 使用where子句查询

> 数据库表一般包含大量的数据，很少需要检索表中所有行。通常只会根据特定操作或报告的需要提取表数据的子集。只检索所需数据需要指定搜索条件，搜索条件也成为过滤条件。
>
> 在SELECT语句中，数据根据WHERE子句中指定的搜索条件进行过滤。WHERE子句在表名（FROM子句）之后给出。

打开SelectTest.java,修改第8行TODO中的内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee where empno = 10001";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

> 查询表employee中empno为10001的全部信息

右键SelectTestMain，选择Run运行代码

输出结果为：10001	Georgi	48

#### limit

> SELECT语句返回所有匹配的行，它们可能是指定表中的每个行。为了返回第一行或前几行，可使用LIMIT子句。

打开SelectTest.java，修改第8行TODO中的内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee limit 3";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

> 查询表employee的信息，只返回前三行

右键SelectTestMain，选择Run运行代码

输出结果为：

​			10001	Georgi	48	
​			10003	Parto	33	
​			10005	Kyoichi	23	

#### like

> LIKE指示MySQL,后跟的搜索模式利用通配符匹配而不是直接相等匹配进行比较。

打开SelectTest.java，修改第8行TODO中的内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee where ename like '%art%'";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

> 查询ename中包含art的员工信息

右键SelectTestMain，选择Run运行代码

输出结果为：

​			10003	Parto	33	

#### order by

> 为了明确地排序用SELECT语句检索出的数据，可使用ORDER BY子句。

打开SelectTest.java，修改第8行TODO中内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee order by empno desc";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

> 查询employee表信息，并按empno倒叙展示

右键SelectTestMain，选择Run运行代码

输出结果为：

​			10006	Anneke	19	
​			10005	Kyoichi	23	
​			10004	Chirs	40	
​			10003	Parto	33	
​			10002	Bezalel	21	
​			10001	Georgi	48	

## union

> 多数SQL查询都只包含从一个或多个表中返回数据的单条SELECT语
> 句。 MySQL也允许执行多个查询（多条SELECT语句），并将结果作为单个
> 查询结果集返回。这些组合查询通常称为并（ union） 或复合查询
> （compound query）。

打开SelectTest.java，修改第8行TODO中内容为：

```java
stmt = conn.createStatement();
String sql = "select * from employee where age > 22 union select * from employee where empno = 10002";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

> 第一条SELECT检索age大于22的员工信息，第二条SELECT检索empno为10002的员工信息

右键SelectTestMain，选择Run运行代码

输出结果为：

​			10001	Georgi	48	
​			10003	Parto	33	
​			10005	Kyoichi	23	
​			10004	Chirs	40	
​			10002	Bezalel	21

## group by

> GROUP BY我们可以先从字面上来理解，GROUP表示分组，BY后面写字段名，就表示根据哪个字段进行分组，如果有用Excel比较多的话，GROUP BY比较类似Excel里面的透视表。
> GROUP BY必须得配合聚合函数来用，分组之后你可以计数（COUNT），求和（SUM），求平均数（AVG）等。

打开SelectTest.java，修改第8行TODO中内容为：

```java
stmt = conn.createStatement();
String sql = "select vend_id,count(*) as num_prods from products group by vend_id";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键SelectTestMain，选择Edit，修改参数为groupBy

![1735-140-7.png](https://doc.shiyanlou.com/courses/1735/1207281/3fadd0700ccc3ee6c4472c9c8588cfb7-0)

右键SelectTestMain，选择Run运行代码

输出结果为：

​			1001	3	
​			1002	2	
​			1003	3		

## join

> SQL最强大的功能之一就是能在数据检索查询的执行中联结（join）表。联结是利用SQL的SELECT能执行的

join按照功能大致分为如下三类：

- **INNER JOIN（内连接,或等值连接）**：获取两个表中字段匹配关系的记录。
- **LEFT JOIN（左连接）：**获取左表所有记录，即使右表没有对应匹配的记录。
- **RIGHT JOIN（右连接）：** 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。

#### inner join

打开SelectTest.java,修改第8行TODO内容为：

```java
stmt = conn.createStatement();
String sql = "SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM info_tbl a INNER JOIN count_tbl b ON a.runoob_author = b.runoob_author";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键SelectTestMain，选择Edit，修改参数为join

![1735-140-8.png](https://doc.shiyanlou.com/courses/1735/1207281/f121bb5dded38369e866d7efd01aa3f6-0)

右键SelectTestMain，选择Run运行代码

输出结果为：

​			1	sequoiadb.com	10	
​			2	sequoiadb.com	10	
​			3	baidu.com	20	
​			4	baidu.com	20	

#### left join

打开SelectTest.java,修改第8行TODO中的内容为：

```java
stmt = conn.createStatement();
String sql = "SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM info_tbl a LEFT JOIN count_tbl b ON a.runoob_author = b.runoob_author;";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键SelectTestMain，选择Run运行代码

输出结果为：

​			1	sequoiadb.com	10	
​			2	sequoiadb.com	10	
​			3	baidu.com	20	
​			4	baidu.com	20	
​			5	FK	null		

#### right join

打开SelectTest.java,修改第8行TODO中内容为：

```java
stmt = conn.createStatement();
String sql = "SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM info_tbl a RIGHT JOIN count_tbl b ON a.runoob_author = b.runoob_author;";
rs = stmt.executeQuery(sql);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键SelectTestMain，选择Run运行代码

输出结果为：

​			1	sequoiadb.com	10	
​			2	sequoiadb.com	10	
​			3	baidu.com	20	
​			4	baidu.com	20	
​			null	null	22	



