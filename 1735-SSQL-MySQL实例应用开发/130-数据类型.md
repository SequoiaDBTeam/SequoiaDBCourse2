---
show: step
version: 1.0 
---
# 1.3数据类型

## 课程介绍

本课程将带领您在已经部署 SequoiaDB 巨杉数据库引擎及创建了 MySQL 实例的环境中，熟悉使用MySQL的各种数据类型

#### 请点击右侧选择使用的实验环境

#### 实验环境

课程使用的实验环境为 Ubuntu Linux 16.04 64 位版本。SequoiaDB 数据库引擎以及 SequoiaSQL-MySQL 实例均为 3.4 版本。

#### 概述

数据类型指所容许的数据的类型。每个表列都有相应的数据类型，它限制该列中存储的数据。Mysql支持多种数据类型，本节将主要讲述整型、浮点型、日期类型、字符串类型和lob字段的创建删除。

## 打开项目

#### 打开idea

打开idea代码开发工具

![1735-110-1.png](https://doc.shiyanlou.com/courses/1735/1207281/6f87a8c93937c3c51f6d4839559de710-0)

#### 打开SSQL-MySQL项目

打开SSQL-MySQL项目，在该课程中完成后续试验

![1735-110-13.png](https://doc.shiyanlou.com/courses/1735/1207281/40a9e7b6fbd5c3853dc09f69d0a06c86-0)

#### 打开lesson3_dataType包

打开lesson3_dataType packge，在该packge中完成后续课程。

![1735-130-1.png](https://doc.shiyanlou.com/courses/1735/1207281/a351ccb7f02cc10bd4c5b581fece22c9-0)

## 创建整型字段的表

#### 整型

| MySQL数据类型 | 含义（有符号）                        |
| ------------- | ------------------------------------- |
| tinyint(m)    | 1个字节  范围(-128~127)               |
| smallint(m)   | 2个字节  范围(-32768~32767)           |
| mediumint(m)  | 3个字节  范围(-8388608~8388607)       |
| int(m)        | 4个字节  范围(-2147483648~2147483647) |
| bigint(m)     | 8个字节  范围(+-9.22*10的18次方)      |

#### 创建整型字段的表，插入并查询数据

打开DataTypeTest.java，修改第35行integerTest方法中TODO中的内容为

```java
stmt = conn.createStatement();
String sql = "create table integerTab(a tinyint,b smallint,c mediumint,d int,e bigint)";
stmt.executeUpdate(sql);
String sql2 = "insert into integerTab values(111,222,333,444,555)";
stmt.executeUpdate(sql2);
String sql3 = "select * from integerTab";
rs = stmt.executeQuery(sql3);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键DataTypeMainTest，选择Edit，修改参数为integerTest,再次右键DataTypeMainTest,选择Run执行代码

![1735-130-2.png](https://doc.shiyanlou.com/courses/1735/1207281/ea766233ff745d6681a5356cbccbf508-0)

![1735-130-4.png](https://doc.shiyanlou.com/courses/1735/1207281/b9b54b66e5c5bc6d0b15fd52ec3b649f-0)

输出结果为：111	222	333	444	555	

## 创建浮点和定点的表

#### 浮点型（float和double）

| MySQL数据类型 | 含义                                                |
| ------------- | --------------------------------------------------- |
| float(m,d)    | 单精度浮点型    8位精度(4字节)     m总个数，d小数位 |
| double(m,d)   | 双精度浮点型    16位精度(8字节)    m总个数，d小数位 |

 定点数

> 浮点型在数据库中存放的是近似值，而定点类型在数据库中存放的是精确值。 
>
> decimal(m,d) 参数m<65 是总个数，d<30且 d<m 是小数位。	

创建浮点和定点型字段的表，插入并查询数据

打开DataTypeTest.java，修改第29行doubleTest方法中TODO中的内容为

```java
stmt = conn.createStatement();
String sql = "create table doubleTab(a float,b double,c decimal(5,2))";
stmt.executeUpdate(sql);
String sql2 = "insert into doubleTab values(1.11,2.22,333.33)";
String sql3 = "insert into doubleTab values(2.89,1,33.345)";
stmt.executeUpdate(sql2);
stmt.executeUpdate(sql3);
String sql4 = "select * from doubleTab";
rs = stmt.executeQuery(sql4);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键DataTypeMainTest，选择Edit，修改参数为doubleTest,再次右键DataTypeMainTest,选择Run执行代码

输出结果为：

​			1.11	2.22	333.33	
​			2.89	1	33.35	

## 创建日期时间类型的表

#### 日期时间类型

| MySQL数据类型 | 含义                          |
| ------------- | ----------------------------- |
| date          | 日期 '2008-12-2'              |
| time          | 时间 '12:25:36'               |
| datetime      | 日期时间 '2008-12-2 22:06:44' |
| timestamp     | 自动存储记录修改时间          |

> 若定义一个字段为timestamp，这个字段里的时间数据会随其他字段修改的时候自动刷新，所以这个数据类型的字段可以存放这条记录最后被修改的时间。

创建日期时间类型字段的表，插入并查询数据

打开DataTypeTest.java，修改第23行dateTest方法中TODO中的内容为

```java
stmt = conn.createStatement();
String sql = "create table dateTab(a date,b time,c datetime,d timestamp)";
stmt.executeUpdate(sql);
String sql2 = "insert into dateTab values('2020-3-31','15:20:36','2020-3-31 15:20:36',null)";
stmt.executeUpdate(sql2);
String sql4 = "select * from dateTab";
rs = stmt.executeQuery(sql4);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键DataTypeMainTest，选择Edit，修改参数为dateTest,再次右键DataTypeMainTest,选择Run执行代码

输出结果为：2020-03-31	15:20:36	2020-03-31 15:20:36.0	2020-04-14 10:05:39.0		

## 创建字符串类型的表

#### 字符串类型

| MySQL数据类型 | 含义                            |
| ------------- | ------------------------------- |
| char(n)       | 固定长度，最多255个字符         |
| varchar(n)    | 固定长度，最多65535个字符       |
| tinytext      | 可变长度，最多255个字符         |
| text          | 可变长度，最多65535个字符       |
| mediumtext    | 可变长度，最多2的24次方-1个字符 |
| longtext      | 可变长度，最多2的32次方-1个字符 |

> char和varchar：
>
> 1.char(n) 若存入字符数小于n，则以空格补于其后，查询之时再将空格去掉。所以char类型存储的字符串末尾不能有空格，varchar不限于此。 
>
> 2.char(n) 固定长度，char(4)不管是存入几个字符，都将占用4个字节，varchar是存入的实际字符数+1个字节（n<=255）或2个字节(n>255)，
>
> 所以varchar(4),存入3个字符将占用4个字节。 
>
> 3.char类型的字符串检索速度要比varchar类型的快。
> varchar和text： 
>
> 1.varchar可指定n，text不能指定，内部存储varchar是存入的实际字符数+1个字节（n<=255）或2个字节(n>255)，text是实际字符数+2个字
>
> 节。 
>
> 2.text类型不能有默认值。 
>
> 3.varchar可直接创建索引，text创建索引要指定前多少个字符。varchar查询速度快于text,在都创建索引的情况下，text的索引似乎不起作用。	

创建字符串类型字段的表，插入并查询数据

打开DataTypeTest.java，修改第16行strTest方法中TODO中的内容为

```java
stmt = conn.createStatement();
String sql = "create table strTab(a char(32),b varchar(32),c tinytext,d text,e mediumtext,f longtext)";
stmt.executeUpdate(sql);
String sql2 = "insert into strTab values('aaaaa','bbbbb','ccccc','ddddd','eeeee','fffff')";
stmt.executeUpdate(sql2);
String sql4 = "select * from strTab";
rs = stmt.executeQuery(sql4);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t");
    }
    System.out.println();
}
```

右键DataTypeMainTest，选择Edit，修改参数为strTest,再次右键DataTypeMainTest,选择Run执行代码

输出结果为：aaaaa	bbbbb	ccccc	ddddd	eeeee	fffff

## 创建lob字段的表（插入，查询，验证结果）

创建lob类型字段的表，插入/opt/sequoiadb/路径下的文件om_ver.conf到表中，并查询数据

打开DataTypeTest.java，修改第10行lobTest方法中TODO中的内容为

```java
stmt = conn.createStatement();
String sql = "create table lobTab(id int,name varchar(32),file blob)";
stmt.executeUpdate(sql);
String sql2 = "insert into lobTab(id,name,file) values(?,?,?)";
PreparedStatement ps = conn.prepareStatement(sql2);
ps.setInt(1,1);
ps.setString(2,"bob");
InputStream in = new FileInputStream("/opt/sequoiadb/om_ver.conf");
ps.setBlob(3,in);
ps.executeUpdate();
String sql4 = "select * from lobTab";
rs = stmt.executeQuery(sql4);
while (rs.next()) {
    for (int i = 1; i <= rs.getMetaData().getColumnCount() ; i++) {
        System.out.print(rs.getString(i)+"\t\t");
    }
    System.out.println();
}
```

右键DataTypeMainTest，选择Edit，修改参数为lobTest,再次右键DataTypeMainTest,选择Run执行代码

查看结果

![1735-130-6.png](https://doc.shiyanlou.com/courses/1735/1207281/6893ee2142d1516c2a51ddaba0558887-0)



