---
show: step
version: 1.0

---

## 课程介绍

本课程将介绍在 Java 开发环境下如何为 SequoiaDB 数据库 JSON 实例中的集合添加各种类型的索引。

#### JSON 开发简介

SequoiaDB 巨杉数据库为应用提供通过 SDK 驱动进行数据库操作和集群操作的接口。

#### 实验流程简述

- 用户通过 IDEA 编辑器编写 Java 源码
- 实验相关核心代码，可从文档中的代码示例粘贴到项目指定文件的 TODO 标记处
- 通过编译、运行 Java 代码，操作 SequoiaDB 数据库 JSON 实例

![](https://doc.shiyanlou.com/courses/1736/1207281/7b1731fc121e3b460dcd9841eb0218a6-0)

#### 实验环境

课程使用的实验环境为 Ubuntu Linux 16.04 64 位版本。SequoiaDB 数据库引擎为 3.4 版本。IDEA 编辑器为 2019.3.4 版本。JDK 为 1.8 版本。

## 打开项目

#### 打开 IDEA

打开 IDEA 代码开发工具。

![](https://doc.shiyanlou.com/courses/1736/1207281/06650396616c742995bb63fcf933fac5-0)

#### 打开项目

打开指定项目，在该项目中完成所有实验步骤。

![](https://doc.shiyanlou.com/courses/1736/1207281/9f17386c8098e8f4e46634f208fcd36b-0)

#### 打开 Package

打开指定的 Package，在该 Package 中完成后续课程。

![](https://doc.shiyanlou.com/courses/1736/1207281/2a376cfb6d5f2ffcf49e1e2de8d48809-0)

## 普通索引

#### 概述

创建一条普通索引。

#### 操作步骤

打开指定的 Java 源文件。

![](https://doc.shiyanlou.com/courses/1736/1207281/4189e305594e8c0cb0104fa6363adb90-0)

复制以下代码样例。

```java
// 索引包含的字段
column.put("empno", 1);
// 创建普通索引
cl.createIndex("idx_empno", column, false, false);
```

将代码样例粘贴到第 20 行的 TODO ~ TODO END 位置区间内。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/c4a3c1a36b8001cbb93991ea12d9a266-0)

右键点击 IndexMainTest 类，创建/编辑主类运行环境。

![](https://doc.shiyanlou.com/courses/1736/1207281/303e8e2182e6abf56edbbb1c024ef65d-0)

配置 Configuration 页中的 Program arguments 选项，写入指定的参数，点击”OK“。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/87ca0ea607ae75311510a4a14cef671d-0) 

右键点击 IndexMainTest 类，运行主程序。

![](https://doc.shiyanlou.com/courses/1736/1207281/bcdc6666f7a83fd115c4cb39c8bb1be8-0)

在 IDEA 输出窗口查看运行效果。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/90f22a627bd7aa9ab094c1f5e6721a13-0)

双击放大控制台输出窗口，查看详细输出信息。

![](https://doc.shiyanlou.com/courses/1736/1207281/efe95c6413586322e317c4114e9c5900-0)

通过输出信息，可以看到成功创建了一条普通索引。

## 唯一索引

#### 概述

创建一条唯一索引。

#### 操作步骤

打开指定的 Java 源文件。

![](https://doc.shiyanlou.com/courses/1736/1207281/5a0cf72291ce2f4a434394266ba3381d-0)

复制以下代码样例。

```java
BasicBSONObject column = new BasicBSONObject();
// 索引包含的字段
column.put("empno", 1);
// 创建唯一索引
cl.createIndex("idx_empno", column, true, false);
```

将代码样例粘贴到第 19 行的 TODO ~ TODO END 位置区间内。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/12a3004f5cebe49fa9aa2cae87c793c2-0)

右键点击 IndexMainTest 类，创建/编辑主类运行环境。

![](https://doc.shiyanlou.com/courses/1736/1207281/303e8e2182e6abf56edbbb1c024ef65d-0)

配置 Configuration 页中的 Program arguments 选项，写入指定的参数，点击”OK“。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/b033baf9310c57be5d98356e2588ed5b-0) 

右键点击 IndexMainTest 类，运行主程序。

![](https://doc.shiyanlou.com/courses/1736/1207281/bcdc6666f7a83fd115c4cb39c8bb1be8-0)

在 IDEA 输出窗口查看运行效果。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/90f22a627bd7aa9ab094c1f5e6721a13-0)

双击放大控制台输出窗口，查看详细输出信息。

![](https://doc.shiyanlou.com/courses/1736/1207281/27c702e9a16a480ff8c8c6892e6c37af-0)

通过输出信息，可以看到成功为指定字段创建了唯一索引。

## 联合索引

#### 概述

创建一条联合索引。

#### 操作步骤

打开指定的 Java 源文件。

![](https://doc.shiyanlou.com/courses/1736/1207281/28d45160bf8a3730b559d8671567aa53-0)

复制以下代码样例。

```java
BasicBSONObject column = new BasicBSONObject();
// 索引包含的字段
column.put("empno", 1);
column.put("deptno", 1);
// 创建联合索引
cl.createIndex("idx_empno", column, false, false);
```

将代码样例粘贴到第 19 行的 TODO ~ TODO END 位置区间内。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/712bcb516e387f5eef33b6f7f87e6612-0)

右键点击 IndexMainTest 类，创建/编辑主类运行环境。

![](https://doc.shiyanlou.com/courses/1736/1207281/303e8e2182e6abf56edbbb1c024ef65d-0)

配置 Configuration 页中的 Program arguments 选项，写入指定的参数，点击”OK“。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/79f87bfe1688462650c2805b8259ce83-0) 

右键点击 IndexMainTest 类，运行主程序。

![](https://doc.shiyanlou.com/courses/1736/1207281/bcdc6666f7a83fd115c4cb39c8bb1be8-0)

在 IDEA 输出窗口查看运行效果。

![// TODO 贴图](https://doc.shiyanlou.com/courses/1736/1207281/90f22a627bd7aa9ab094c1f5e6721a13-0)

双击放大控制台输出窗口，查看详细输出信息。

![](https://doc.shiyanlou.com/courses/1736/1207281/b06c037f883d72affc04ecb0f320bfde-0)

通过输出信息，可以看到成功创建了一条复合索引。

## 总结

本课程介绍了在 Java 开发环境下如何为 SequoiaDB 数据库 JSON 实例中的集合添加各种类型的索引。
